<!DOCTYPE html>

<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

	<script src="js/raphael.2.1.0.min.js"></script>
    <script src="js/justgage.1.0.1.min.js"></script>
    <script src="js/jquery-1.8.2.min.js"></script>

	<script type='text/javascript'>

		$(document).ready(function(){

			var gauge = new JustGage({
				id: "gauge",
				value: 50,
				min: 0,
				max: 100,
				title: "Twitter Political Mood",
				label: "liberal:conservative",
				valueFontColor: "#ffffff",
				labelFontColor: "#ffffff",
				showMinMax: false,
				gaugeColor: "#ff3333",
				levelColors: ["#0066cc"],
				shadowOpacity: .6,
				shadowSize: 10
			});

			(function poll(){
			    $.ajax({ url: "./out.txt", 
			    	success: function(data){
			        	gauge.refresh(data.gauge)
			        	$('#label').text(data.gauge+":"+(100-data.gauge));
			        	$('#sublabel').text(data.tweets+" tweets");
			    	}, 
			    	dataType: "json",
			    	complete: poll,
			    timeout: 30000 });
			})();

		});

	</script>

	<style type='text/css'>
		body {
			font-family: 'Arial';
		}
		#gauge {
			width: 500px;
			height: 300px;
			margin: auto;
		}
		#label {
			width: 100px;
			position: absolute;
			left: 50%;
			top: 200px;
			margin-left: -50px;
			font-size: 38px;
			text-align: center;
			font-weight: bold;
		}
		#sublabel {
			width: 200px;
			position: absolute;
			left: 50%;
			top: 240px;
			margin-left: -100px;
			font-size: 18px;
			text-align: center;
			font-weight: bold;
			color: gray;
		}
		a.alchemy {
			position: absolute;
			bottom: 10px;
			right: 10px;
		}
		div.alchemy {
			position: absolute;
			bottom: 34px;
			right: 275px;
		}
	</style>

</head>

<body>
	<div id='gauge'></div>
	<div id='label'>50:50</div>
	<div id='sublabel'>0 tweets</div>

	<div class='alchemy'>Powered by</div>
	<a class='alchemy' href='http://www.alchemyapi.com'>
		<img src='http://www.alchemyapi.com/images/alchemyAPI.jpg' alt='alchemy-logo'/>
	</a>
</body>

</html>
